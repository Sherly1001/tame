var C=Object.defineProperty;var T=(r,s,o)=>s in r?C(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o;var c=(r,s,o)=>(T(r,typeof s!="symbol"?s+"":s,o),o);import{r as u,j as e,B as p,F as a,T as f,S as j,a as B,b as v,c as k,N as M,d as I,e as x,f as g,g as O,h as L,i as y,k as S,l as w,L as N,m as P,n as F,o as E,R,C as W}from"./vendor-48ea06d5.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))h(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&h(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();class m{constructor(){c(this,"blockMode","blacklist");c(this,"blacklist",[]);c(this,"whitelist",[]);c(this,"blockSeen",!0);c(this,"blockTyping",!0)}static keys(){const s=new m;return Object.getOwnPropertyNames(s)}}async function A(){return await browser.storage.local.get(m.keys())}async function d(r,s){const o=JSON.stringify(r);return s?await browser.tabs.sendMessage(s,o):await browser.runtime.sendMessage(o)}function D(){const[r,s]=u.useState(new m),[o,h]=u.useState(""),[t,n]=u.useState(-1);return u.useEffect(()=>{A().then(s),browser.runtime.onMessage.addListener((i,l)=>{const b=JSON.parse(i);b.cfg&&s(b.cfg)}),browser.runtime.connect()},[]),e.jsxs(p,{minHeight:"60",children:[e.jsxs(a,{padding:"2",children:[e.jsxs(a,{flex:"1",minWidth:"36",alignItems:"center",justifyContent:"space-between",paddingEnd:"4",children:[e.jsx(f,{children:"Block Seen"}),e.jsx(j,{isChecked:r.blockSeen,onChange:()=>{d({toggleBlockSeen:!r.blockSeen})}})]}),e.jsxs(a,{flex:"1",minWidth:"36",alignItems:"center",justifyContent:"space-between",children:[e.jsx(f,{children:"Block Typing"}),e.jsx(j,{isChecked:r.blockTyping,onChange:()=>{d({toggleBlockTyping:!r.blockTyping})}})]})]}),e.jsxs(B,{position:"relative",onChange:i=>{d({toggleBlockMode:i?"whitelist":"blacklist"})},index:r.blockMode=="blacklist"?0:1,children:[e.jsxs(v,{children:[e.jsx(k,{children:"blacklist"}),e.jsx(k,{children:"whitelist"})]}),e.jsx(p,{paddingX:"4",paddingTop:"2",children:e.jsx("form",{onSubmit:i=>{i.preventDefault(),d({[r.blockMode=="blacklist"?"addToBlacklist":"addToWhitelist"]:o}),h("")},children:e.jsxs(a,{children:[e.jsx(M,{value:o,onChange:i=>h(i),children:e.jsx(I,{placeholder:"conversation id",flex:"1"})}),e.jsx(x,{type:"submit",marginStart:"2",children:e.jsx(g,{icon:O})})]})})}),e.jsxs(L,{maxHeight:"80",overflowY:"scroll",children:[e.jsx(y,{children:r.blacklist.map((i,l)=>e.jsxs(a,{marginY:"2",children:[e.jsx(a,{flex:"1",border:"1px solid #38383d",borderRadius:"6",alignItems:"center",paddingStart:"2",children:e.jsx(f,{children:i})}),e.jsx(x,{type:"submit",marginStart:"2",onClick:()=>{t!=l?n(l):(d({removeFromBlacklist:i}),n(-1))},onBlur:()=>{n(-1)},children:e.jsx(g,{icon:t==l?S:w})})]},l))}),e.jsx(y,{children:r.whitelist.map((i,l)=>e.jsxs(a,{marginY:"2",children:[e.jsx(a,{flex:"1",border:"1px solid #38383d",borderRadius:"6",alignItems:"center",paddingStart:"2",children:e.jsx(f,{children:i})}),e.jsx(x,{type:"submit",marginStart:"2",onClick:()=>{t!=l?n(l):(d({removeFromWhitelist:i}),n(-1))},onBlur:()=>{n(-1)},children:e.jsx(g,{icon:t==l?S:w})})]},l))})]}),e.jsx(p,{position:"absolute",top:"2",right:"4",children:e.jsx(N,{href:"https://github.com/Sherly1001/tame",target:"_blank",children:e.jsx(g,{icon:P})})})]})]})}const Y=F({config:{initialColorMode:"dark",useSystemColorMode:!1}});E.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(W,{theme:Y,children:e.jsx(D,{})})}));
