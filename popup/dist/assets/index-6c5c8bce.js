var y=Object.defineProperty;var w=(s,n,i)=>n in s?y(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i;var a=(s,n,i)=>(w(s,typeof n!="symbol"?n+"":n,i),i);import{r as f,j as e,F as d,T as j,B as k,a as m,f as S,b as C,S as M,c as h,d as T,e as N,g as x,N as v,h as B,i as F,k as L,l as b,L as O,m as P,n as I,o as D,R as E,C as R}from"./vendor-c0f883bb.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();function p({list:s,onDelete:n}){const[i,o]=f.useState(-1);return e.jsx(e.Fragment,{children:s.map((t,r)=>e.jsxs(d,{marginY:"2",children:[e.jsx(d,{flex:"1",border:"1px solid #38383d",borderRadius:"6",alignItems:"center",paddingStart:"2",children:e.jsx(j,{children:t})}),e.jsx(k,{type:"submit",marginStart:"2",onClick:()=>{i!=r?o(r):(n(t),o(-1))},onBlur:()=>{o(-1)},children:e.jsx(m,{icon:i==r?S:C})})]},r))})}function g({label:s,isChecked:n,onChange:i}){return e.jsx(e.Fragment,{children:e.jsxs(d,{flex:"1",minWidth:"36",alignItems:"center",justifyContent:"space-between",paddingEnd:"4",children:[e.jsx(j,{children:s}),e.jsx(M,{isChecked:n,onChange:i})]})})}class u{constructor(){a(this,"fakeMessageNotification",!1);a(this,"blockMode","blacklist");a(this,"blacklist",[]);a(this,"whitelist",[]);a(this,"blockSeen",!0);a(this,"blockTyping",!0)}static keys(){const n=new u;return Object.getOwnPropertyNames(n)}}async function A(){return await browser.storage.local.get(u.keys())}async function l(s,n){const i=JSON.stringify(s);return n?await browser.tabs.sendMessage(n,i):await browser.runtime.sendMessage(i)}function W(){const[s,n]=f.useState(new u),[i,o]=f.useState("");return f.useEffect(()=>{A().then(n),browser.runtime.onMessage.addListener((t,r)=>{const c=JSON.parse(t);c.cfg&&n(c.cfg)}),browser.runtime.connect()},[]),e.jsxs(h,{children:[e.jsxs(d,{padding:"2",flexDirection:"column",children:[e.jsxs(d,{children:[e.jsx(g,{label:"Block Seen",isChecked:s.blockSeen,onChange:()=>{l({toggleBlockSeen:!s.blockSeen})}}),e.jsx(g,{label:"Block Typing",isChecked:s.blockTyping,onChange:()=>{l({toggleBlockTyping:!s.blockTyping})}})]}),e.jsx(g,{label:"Fake Message Notification",isChecked:s.fakeMessageNotification,onChange:()=>{l({toggleFakeMessage:!s.fakeMessageNotification})}})]}),e.jsxs(T,{position:"relative",onChange:t=>{l({toggleBlockMode:t?"whitelist":"blacklist"})},index:s.blockMode=="blacklist"?0:1,children:[e.jsxs(N,{children:[e.jsx(x,{children:"blacklist"}),e.jsx(x,{children:"whitelist"})]}),e.jsx(h,{paddingX:"4",paddingTop:"2",children:e.jsx("form",{onSubmit:t=>{t.preventDefault(),l({[s.blockMode=="blacklist"?"addToBlacklist":"addToWhitelist"]:i}),o("")},children:e.jsxs(d,{children:[e.jsx(v,{value:i,onChange:t=>o(t),children:e.jsx(B,{placeholder:"conversation id",flex:"1"})}),e.jsx(k,{type:"submit",marginStart:"2",children:e.jsx(m,{icon:F})})]})})}),e.jsxs(L,{maxHeight:"80",overflowY:"scroll",children:[e.jsx(b,{children:e.jsx(p,{list:s.blacklist,onDelete:t=>{l({removeFromBlacklist:t})}})}),e.jsx(b,{children:e.jsx(p,{list:s.whitelist,onDelete:t=>{l({removeFromWhitelist:t})}})})]}),e.jsx(h,{position:"absolute",top:"2",right:"4",children:e.jsx(O,{href:"https://github.com/Sherly1001/tame",target:"_blank",children:e.jsx(m,{icon:P})})})]})]})}const J=I({config:{initialColorMode:"dark",useSystemColorMode:!1}});D.createRoot(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(R,{theme:J,children:e.jsx(W,{})})}));
